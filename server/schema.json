{
    "migrate_up":{
        "users":"create table users (id serial primary key, email varchar(255) unique, password varchar(255) unique, role integer, created timestamp default NOW())",
        "items":"create table items (id serial primary key, name varchar(255) unique, description varchar(255), price double, created timestamp default NOW())",
        "orders":"create table orders (id serial primary key, user_id int, details text, total_price double, paid boolean, created timestamp default NOW())",
        "images":"create table images (id serial primary key, item_id integer, url varchar(255))"
    },
    "migrate_down":{
        "users":"drop table users;",
        "items":"drop table items;",
        "orders":"drop table orders;"
    },
    "queries":{
        "insert":{
            "user":"insert into users SET ?",
            "item":"insert into items  SET ?",
            "image":"insert into images SET ?",
            "order":"insert into orders SET ? "
        },
        "select":{
            "user":"select id, username, password, created from users where ?? = ?",
            "all_items":"select items.name, items.description, items.price, JSON_OBJECT('urls', images.url) as images from items left join images on items.id = images.item_id;",
            "item":"select items.name, items.description, items.price, JSON_OBJECT('urls', images.url) as images from items left join images on items.id = images.item_id where items.id = ?" ,
            "order":"select orders.id as order_id, orders.user_id, orders.details as order_details, orders.total_price, orders.created as order_created_at, users.email as user_email, users.created as user_created_at from orders join users on orders.user_id == users.id where orders.user_id = ?"           
        },
        "update":{
            "order_paid":"update orders set paid = true where ?? = ? "
        },
        "delete":{
            "item_id":"delete from items where ?? = ?"
        }
    }
}